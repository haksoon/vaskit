<div class="jumbotron clearfix">
  <h1>DB 조회하기</h1>
  <p>DB의 내용을 조회할 수 있습니다</p>
	<select id="table_select" class="form-control">
		<option value="" disabled="true" selected="selected">조회할 DB를 선택하세요</option>
    <% @tables.each do |table| %>
      <option value="<%= table %>"><%= table %></option>
    <% end %>
  </select>
</div>

<% if @records.blank? %>
  <div class="panel panel-primary">
    <div class="panel-heading">DB를 선택해주세요</div>
<% else %>
  <div class="panel panel-info">
		<!-- Default panel contents -->
		<div class="panel-heading"><%= @tableModel.name %></div>

		<!-- Table -->
    <div class="table-responsive">
  		<table class="table table-bordered table-condensed table-striped table-hover">
  			<thead>
  				<tr>
  					<% @record_names.each do |name| %>
  						<th><%=name%></th>
  					<% end %>
  				</tr>
  			</thead>
  			<tbody>
  				<% @records.each do |record| %>
  					<tr>
  						<% @record_names.each do |name| %>
  							<% if record[name].class == ActiveSupport::TimeWithZone %>
  								<td><%= format_datetime(record[name], :date) %></td>
  							<% else %>
  								<td><%= record[name] %></td>
  							<% end %>
  						<% end %>
  					</tr>
  				<% end %>
  			</tbody>
  		</table>
    </div>

		<!-- Table Pagination -->
		<div class="panel-footer" style="text-align: center;">
			<%= paginate @records %>
		</div>
<% end %>
</div>

<script>
	$("#table_select").on("change", function(){
		document.location.assign("/admin/tables/" + $(this).val() + "/?page=1");
	});
</script>
